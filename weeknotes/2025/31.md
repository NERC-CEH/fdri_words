# 2025 Week 31

weeknote

## EA and SEPA data is ingested!
<img width="990" height="475" alt="image" src="https://github.com/user-attachments/assets/3fd7e109-c5e5-4636-b3e1-bc83bc63bfa3" />
<img width="1889" height="473" alt="image" src="https://github.com/user-attachments/assets/b76405fb-b1fd-4422-835d-862959c3968e" />

We've now got EA and SEPA api data being regularly ingested into our systems and store in s3. This is a huge milestone in getting ready to process the NRFA data in our new system.

## Processing Updates

A few more of us in the team have been getting involved and focusing on the [time series processor](https://github.com/NERC-CEH/dri-timeseries-processor). 

- mergin the ts_def and ts_id
- implementing derivations
- implementing aggregations
- passing the network via the cli

## Data Publishing

<img width="812" height="293" alt="image" src="https://github.com/user-attachments/assets/95483af1-43a8-46aa-ac82-1d913d87b21d" />

Work is starting on getting the FDRI data into our publishing systems. Mostly like source of truth data format will be parquet, with options to request CSV.

Expected data available (per catchment)

- FDRI Chess catchment meteorological station data
- FDRI Chess catchment rainfall station data
- FDRI Chess catchment evaporation station data
- FDRI Chess catchment soil moisture station data
- FDRI Chess catchment groundwater station data
- FDRI Chess catchment river level/flow station data
- FDRI Chess catchment water quality station data


## 30 minute data now available in the UI
<img width="1354" height="1032" alt="image" src="https://github.com/user-attachments/assets/cc67af20-a786-4522-84cd-84604dbb56c8" />

Thirty minute data can now be [viewed and plotted in our UI](https://dri-ui.staging.eds.ceh.ac.uk/fdri/sites/7ERZ-EEAE-23ZK?view=explore&startDate=2025-07-20T14%3A18%3A22Z&endDate=2025-07-30T23%3A59%3A59Z&variables=fdri-thirty_minute-7ERZ-EEAE-23ZK-FA_neutrons%2Cfdri-one_minute-7ERZ-EEAE-23ZK-BattV).


## Phenocam database indexing, sqs etc
<img width="974" height="385" alt="image" src="https://github.com/user-attachments/assets/168e6a2b-39f4-4d67-83da-8106ecf4c9d4" />

Ongoing work is happening to start indexing the phenocam images as they come in, this is essential to allow performant queries to fetch the phenocam images.

Rough sketch of how this fits together:
<img width="1542" height="576" alt="image" src="https://github.com/user-attachments/assets/712c350a-61b8-41e9-9688-a407f4d7e7b8" />



## Cluster version update

<img width="489" height="171" alt="image" src="https://github.com/user-attachments/assets/237af03a-a095-4914-8fd4-0739d12861a3" />

EKS cluster version has been updated from 1.30 -> 1.33

## WP1 are using our UI

Attending the data checking last week we saw, WP1 using our UI instead of excel, this is really great to see and very happy to have our tools used in the early stage.

Here's some links WP1 are using:
- [one](https://dri-ui.staging.eds.ceh.ac.uk/fdri/sites/7ERZ-EEAE-23ZK?view=explore&startDate=2025-07-20T14%3A18%3A22Z&endDate=2025-07-30T23%3A59%3A59Z&variables=fdri-one_minute-7ERZ-EEAE-23ZK-RainE_Pit_Precip_Tot%2Cfdri-one_minute-7ERZ-EEAE-23ZK-RainE_Standard_Precip_Tot%2Cfdri-thirty_minute-7ERZ-EEAE-23ZK-FA_neutrons%2Cfdri-one_minute-7ERZ-EEAE-23ZK-BattV)
- [two](https://dri-ui.staging.eds.ceh.ac.uk/fdri/sites/23B9-FKUR-TW4G?variables=fdri-one_minute-K3CN-QJ9X-6HQ8-Lvl_cm_Avg%2Cfdri-one_minute-K3CN-QJ9X-6HQ8-Distance_m_Avg%2Cfdri-one_minute-K3CN-QJ9X-6HQ8-BattV)
- [three](https://dri-ui.staging.eds.ceh.ac.uk/fdri/sites/23B9-FKUR-TW4G?view=explore&startDate=2025-06-22T23%3A00%3A00Z&endDate=2025-07-30T23%3A59%3A59Z&variables=fdri-one_minute-23B9-FKUR-TW4G-R_LW_in_Avg%2Cfdri-one_minute-23B9-FKUR-TW4G-R_LW_out_Avg%2Cfdri-one_minute-23B9-FKUR-TW4G-R_SW_in_Avg%2Cfdri-one_minute-23B9-FKUR-TW4G-R_SW_out_Avg%2Cfdri-one_minute-23B9-FKUR-TW4G-WS_ms_Avg%2Cfdri-one_minute-23B9-FKUR-TW4G-WindDir%2Cfdri-one_minute-23B9-FKUR-TW4G-albedo_Avg)

## FDRI Product showcase

Last week we had our FDRI WP2 product showcase, this was of a really high standard, giving an overview of what each product has done so far.

## Fun UI bug

![Recording 2025-08-04 102228(1)](https://github.com/user-attachments/assets/44211e5b-c40a-4ed1-ad41-af1ef1403840)

Dithering in above gif is due to compression, the bug is when multiple rows are removed from the select table, this is a race-condition bug related to the query params being updated. Still on going on how best to fix.


