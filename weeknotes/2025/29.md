# 2025 Week 29 DRAFT

Completely missed doing last weeks update, so due a double does this week.

## ‚ùáÔ∏è Lots of improvments in the UI

### Scatterplots

<img width="1317" height="664" alt="image" src="https://github.com/user-attachments/assets/75a0c2e2-292d-4ba8-b6c7-da01d4d60302" />

[Click the chart icon on the right to toggle between line charts and scatterplots.](https://dri-ui.staging.eds.ceh.ac.uk/fdri/sites/23B9-FKUR-TW4G?view=explore&startDate=2025-06-23T23%3A00%3A00.000Z&endDate=2025-07-08T23%3A59%3A59.000Z&variables=fdri-one_minute-7ERZ-EEAE-23ZK-WindDir%2Cfdri-one_minute-23B9-FKUR-TW4G-WindDir)


### Cross Network Data Plotting

<img width="1252" height="882" alt="image" src="https://github.com/user-attachments/assets/e66016f3-228a-4890-896e-4d338351f358" />

[Live data from FDRI and COSMOS can be compared in the same chart.](https://dri-ui.staging.eds.ceh.ac.uk/fdri/sites/23B9-FKUR-TW4G?view=explore&startDate=2025-06-30T23%3A00%3A00.000Z&endDate=2025-07-08T23%3A59%3A59.000Z&variables=cosmos-PT30M-PLYNL-TA%2Cfdri-one_minute-23B9-FKUR-TW4G-AirTemp_C)


### Temporary Corrections

<img width="1448" height="975" alt="image" src="https://github.com/user-attachments/assets/5d8d4414-546a-4f0c-8886-f71be5c124ab" />

Since the FDRI data is coming in unprocessed from the sensors and we aren't ready to plot the processed data, we have added a temporary correction box to the explorer chart table, that allows on the fly corrections to happen.
This allows any abitary calculations to be appended to the existing data.

### Controls to print, zoom in/out etc
<img width="1399" height="1180" alt="image" src="https://github.com/user-attachments/assets/5e84dc92-39a8-4d7e-80a3-8cccc6f7faf8" />


We've enabled the plotty controls to allow downloading the charts as png's for reporting and zoom in/out controls.


## ‚ÄºÔ∏è Incident resulting in downtime


<img width="802" height="357" alt="service-unavailable-503" src="https://github.com/user-attachments/assets/37dadcd7-6bbc-4c0c-93a6-0f974d35090b" />


We have a fun incident last week, that was an odd combination of bad luck.
 1. We released a change to our staging environment that was missing some changes to config required for k8s which broke the deployment
 2. Shortly after the flux Personal Access Token expired
 3. We couldn't rollback the change from 1. since the credentials had expired
 4. The sim cards used for our sensors ran out of data so data stopped coming in at a similar time to above

The solution was to update the flux personal access token and [document the process of doing so for next time.](https://github.com/NERC-CEH/fdri_words_private/blob/main/k8s/flux.md#rotating-the-flux-personal-access-token)
We could then rollback and get things working, fix and roll out the change üöÄ.

## Where's the site ids



## Should we use a database (maybe not)

## Switching to UV


## NRFA data ingestion

